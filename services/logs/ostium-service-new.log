/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
WARNING:root:Could not apply monkey-patch: cannot import name 'SignedTransaction' from 'web3.types' (/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/web3/types.py)
 * Serving Flask app 'ostium-service'
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5002
 * Running on http://192.168.1.19:5002
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 15:59:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 15:59:53] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 15:59:56] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:20] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:22] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:24] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:27] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:52] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:00:56] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:01:03] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:01:06] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:01:36] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:01:40] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:01] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:07] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:11] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:19] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:24] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:29] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:52] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:03:55] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:02] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:05] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:09] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:19] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:23] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:27] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:52] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:55] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:04:59] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:05:03] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:05:07] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:10:47] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:10:51] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:10:55] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:11:15] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:11:19] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:11:22] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:11:45] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:11:48] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:11:51] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:12:15] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:12:18] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:12:21] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:12:45] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:12:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:12:52] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:15] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:21] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:25] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:40] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:46] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:13:52] "POST /positions HTTP/1.1" 200 -
ERROR:__main__:Get positions error: Connection closed
ERROR:__main__:Traceback (most recent call last):
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/streams.py", line 355, in _wait
    await waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/transport/aiohttp.py", line 331, in execute
    result = await resp.json(content_type=None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py", line 751, in json
    await self.read()
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py", line 693, in read
    self._body = await self.content.read()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/streams.py", line 426, in read
    block = await self.readany()
            ^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/streams.py", line 448, in readany
    await self._wait("readany")
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/streams.py", line 354, in _wait
    with self._timer:
         ^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 713, in __exit__
    raise asyncio.TimeoutError from exc_val
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/abhishekdubey/Downloads/Maxxit/services/ostium-service.py", line 153, in get_positions
    result = loop.run_until_complete(sdk.get_open_trades(trader_address=address))
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/ostium_python_sdk/sdk.py", line 103, in get_open_trades
    open_trades = await self.subgraph.get_open_trades(trader_public_address)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/ostium_python_sdk/subgraph.py", line 245, in get_open_trades
    result = await self._execute_query(query, variable_values={"trader": address})
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/ostium_python_sdk/subgraph.py", line 46, in _execute_query
    raise e
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/ostium_python_sdk/subgraph.py", line 35, in _execute_query
    result = await client.execute_async(query, variable_values=variable_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/client.py", line 366, in execute_async
    async with self as session:
               ^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/client.py", line 814, in __aenter__
    return await self.connect_async()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/client.py", line 795, in connect_async
    await self.session.fetch_schema()
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/client.py", line 1661, in fetch_schema
    execution_result = await self.transport.execute(parse(introspection_query))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/transport/aiohttp.py", line 338, in execute
    await raise_response_error(resp, "Not a JSON answer")
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/gql/transport/aiohttp.py", line 323, in raise_response_error
    result_text = await resp.text()
                  ^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py", line 735, in text
    await self.read()
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py", line 693, in read
    self._body = await self.content.read()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/abhishekdubey/Downloads/Maxxit/services/venv/lib/python3.13/site-packages/aiohttp/streams.py", line 400, in read
    raise self._exception
aiohttp.client_exceptions.ClientConnectionError: Connection closed

INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:01] "[35m[1mPOST /positions HTTP/1.1[0m" 500 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:15] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:18] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:21] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:45] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:49] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:14:53] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:15] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:18] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:22] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:29] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:34] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:38] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:45] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:50] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:54] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:15:58] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:16:02] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:16:05] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:16:15] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:16:18] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:16:22] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:17:31] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:17:35] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:17:39] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:17:59] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:18:02] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:18:59] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:19:02] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:19:07] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:19:26] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:19:29] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:19:33] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:19:56] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:20:01] "POST /positions HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Nov/2025 16:20:06] "POST /positions HTTP/1.1" 200 -
